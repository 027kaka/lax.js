"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(){var d,I,e=(d={},I={easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},easeOutBounce:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInBounce:function(e){return 1-I.easeOutBounce(1-e)},easeOutBack:function(e){return 1+2.70158*Math.pow(e-1,3)+1.70158*Math.pow(e-1,2)},easeInBack:function(e){return 2.70158*e*e*e-1.70158*e*e}},new function e(){var a=this;_classCallCheck(this,e),_defineProperty(this,"drivers",[]),_defineProperty(this,"elements",[]),_defineProperty(this,"frame",0),_defineProperty(this,"debug",!1),_defineProperty(this,"windowWidth",0),_defineProperty(this,"windowHeight",0),_defineProperty(this,"debugData",{frameLengths:[]}),_defineProperty(this,"init",function(){a.addDriver("frame",function(){return a.frame}),a.findAndAddElements(),window.requestAnimationFrame(a.onAnimationFrame),a.windowWidth=document.body.clientWidth,a.windowHeight=document.body.clientHeight,window.onresize=a.onWindowResize}),_defineProperty(this,"onWindowResize",function(){document.body.clientWidth===a.windowWidth&&document.body.clientHeight===a.windowHeight||(a.windowWidth=document.body.clientWidth,a.windowHeight=document.body.clientHeight,a.elements.forEach(function(e){return e.calculateAnimations()}))}),_defineProperty(this,"addDriver",function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};a.drivers.push(new i(e,t,n))}),_defineProperty(this,"onAnimationFrame",function(e){a.debug&&(a.debugData.frameStart=Date.now());var t,n={};a.drivers.forEach(function(e){n[e.name]=e.getValue(a.frame)}),a.elements.forEach(function(e){e.update(n,a.frame)}),a.debug&&a.debugData.frameLengths.push(Date.now()-a.debugData.frameStart),a.frame%60==0&&a.debug&&(t=Math.ceil(a.debugData.frameLengths.reduce(function(e,t){return e+t},0)/60),console.log("Average frame calculation time: ".concat(t,"ms")),a.debugData.frameLengths=[]),a.frame++,window.requestAnimationFrame(a.onAnimationFrame)}),_defineProperty(this,"findAndAddElements",function(){document.querySelectorAll("[data-lax]").forEach(function(e){var t=Function("return ".concat(e.getAttribute("data-lax")))();a.elements.push(new o(e,t,0,{}))})}),_defineProperty(this,"addElements",function(e,n,r){document.querySelectorAll(e).forEach(function(e,t){a.elements.push(new o(e,n,t,r))})})});function E(e,t,n,r){var a=0;if(e.forEach(function(e){e<n&&a++}),a<=0)return t[0];if(a>=e.length)return t[e.length-1];var i,o,u,s,c,l=a-1,d=(i=e[l],o=e[a],(n-i)/(o-i));return r&&(d=r(d)),u=t[l],s=t[a],u*(1-(c=d))+s*c}function f(e,t,n){if("number"==typeof e)return e;var r=document.body.clientWidth,a=document.body.clientHeight,i=t.offsetTop,o=t.offsetLeft,u=t.offsetHeight,s=t.offsetWidth;return Function("return ".concat(e.replace(/screenWidth/g,r).replace(/screenHeight/g,a).replace(/elInBottom/g,i-a).replace(/elOutTop/g,i+u).replace(/elCenterVert/g,i+u/2-a/2).replace(/elInRight/g,o-r).replace(/elOutLeft/g,o+s).replace(/elCenterHoriz/g,o+s/2-r/2).replace(/index/g,n)))()}function i(e,t){var r=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,i),_defineProperty(this,"getValueFn",void 0),_defineProperty(this,"name",""),_defineProperty(this,"lastValue",0),_defineProperty(this,"frameStep",1),_defineProperty(this,"m1",0),_defineProperty(this,"m2",0),_defineProperty(this,"momentum",0),_defineProperty(this,"momentumEnabled","off"),_defineProperty(this,"getValue",function(e){var t,n=r.lastValue;return e%r.frameStep==0&&(n=r.getValueFn()),"off"!==r.momentumEnabled&&(t=n-r.lastValue,r.m1=.8*r.m1+t*(1-.8),r.m2=.8*r.m2+r.m1*(1-.8),r.momentum=Math.round(5e3*r.m2)/1e4,"absolute"===r.momentumEnabled&&(r.momentum=Math.abs(r.momentum))),r.lastValue=n,[r.lastValue,r.momentum]}),this.name=e,this.getValueFn=t,Object.keys(n).forEach(function(e){r[e]=n[e]}),this.lastValue=this.getValueFn()}function o(e,t){var P=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};_classCallCheck(this,o),_defineProperty(this,"domElement",void 0),_defineProperty(this,"animationsData",void 0),_defineProperty(this,"styles",{}),_defineProperty(this,"groupIndex",0),_defineProperty(this,"update",function(e,t){var n=P.animations,r={};for(var a in n){var i=n[a],o=_slicedToArray(e[a],2),u=o[0],s=o[1];for(var c in i){var l,d=_slicedToArray(i[c],3),f=d[0],m=d[1],h=d[2],y=void 0===h?{}:h,p=y.loopFrame,g=y.frameStep,b=void 0===g?1:g,v=y.easing,_=y.momentum,w=y.cssFn,A=I[v];t%b==0&&(l=E(f,m,p?u%p:u,A),_&&(l+=s*_),r[c]=w?w(l):l)}}P.applyStyles(r)}),_defineProperty(this,"calculateAnimations",function(){for(var e in P.animations={},P.animationsData){var t=P.animationsData[e];"string"==typeof t&&(t=d[t]);var n={};for(var r in t){var a=_slicedToArray(t[r],3),i=a[0],o=a[1],u=a[2],s=void 0===u?{}:u,c=i.map(function(e){return f(e,P.domElement,P.groupIndex)}),l=o.map(function(e){return f(e,P.domElement,P.groupIndex)});n[r]=[c,l,s]}P.animations[e]=n}}),_defineProperty(this,"applyStyles",function(e){var r,a,t=(r=e,a={transform:"",filter:""},Object.keys(r).forEach(function(e){var t=r[e],n=["perspective","translateX","translateY","translate","border-radius"].includes(e)?"px":["hue-rotate","rotate","rotateX","rotateY","skew","skewX","skewY"].includes(e)?"deg":"";["perspective","translateX","translateY","translate","scaleX","scaleY","scale","skewX","skewY","skew","rotateX","rotateY","rotate"].includes(e)?a.transform+="".concat(e,"(").concat(t).concat(n,")"):["blur","hue-rotate","brightness"].includes(e)?a.filter+="".concat(e,"(").concat(t).concat(n,")"):a[e]="".concat(t).concat(n)}),a);Object.keys(t).forEach(function(e){P.domElement.style[e]=t[e]})}),this.domElement=e,this.animationsData=t,this.groupIndex=n;var a=r.transition;a&&(e.style.transition=a),this.calculateAnimations()}"undefined"!=typeof module&&void 0!==module.exports?module.exports=e:window.lax=e}();