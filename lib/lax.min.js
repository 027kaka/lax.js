"use strict";function _slicedToArray(t,a){return _arrayWithHoles(t)||_iterableToArrayLimit(t,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,a){var e=[],n=!0,r=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(n=(l=i.next()).done)&&(e.push(l.value),!a||e.length!==a);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return e}function _arrayWithHoles(t){if(Array.isArray(t))return t}!function(){var lax=function(){for(var lax={elements:[]},lastY=0,currentBreakpoint="default",breakpointsSeparator="_",transformFns={"data-lax-opacity":function(t,a){t.opacity=a},"data-lax-translate":function(t,a){t.transform+=" translate(".concat(a,"px, ").concat(a,"px)")},"data-lax-translate-x":function(t,a){t.transform+=" translateX(".concat(a,"px)")},"data-lax-translate-y":function(t,a){t.transform+=" translateY(".concat(a,"px)")},"data-lax-scale":function(t,a){t.transform+=" scale(".concat(a,")")},"data-lax-scale-x":function(t,a){t.transform+=" scaleX(".concat(a,")")},"data-lax-scale-y":function(t,a){t.transform+=" scaleY(".concat(a,")")},"data-lax-skew":function(t,a){t.transform+=" skew(".concat(a,"deg, ").concat(a,"deg)")},"data-lax-skew-x":function(t,a){t.transform+=" skewX(".concat(a,"deg)")},"data-lax-skew-y":function(t,a){t.transform+=" skewY(".concat(a,"deg)")},"data-lax-rotate":function(t,a){t.transform+=" rotate(".concat(a,"deg)")},"data-lax-brightness":function(t,a){t.filter+=" brightness(".concat(a,"%)")},"data-lax-contrast":function(t,a){t.filter+=" contrast(".concat(a,"%)")},"data-lax-hue-rotate":function(t,a){t.filter+=" hue-rotate(".concat(a,"deg)")},"data-lax-blur":function(t,a){t.filter+=" blur(".concat(a,"px)")},"data-lax-invert":function(t,a){t.filter+="  invert(".concat(a,"%)")},"data-lax-saturate":function(t,a){t.filter+="  saturate(".concat(a,"%)")},"data-lax-grayscale":function(t,a){t.filter+="  grayscale(".concat(a,"%)")},"data-lax-bg-pos":function(t,a){t.backgroundPosition="".concat(a,"px ").concat(a,"px")},"data-lax-bg-pos-x":function(t,a){t.backgroundPositionX="".concat(a,"px")},"data-lax-bg-pos-y":function(t,a){t.backgroundPositionY="".concat(a,"px")}},_crazy="",i=0;i<100;i++)_crazy+=" "+window.innerHeight*(i/100)+" "+360*Math.random()+", ";function intrp(t,a){for(var e=0;t[e][0]<=a&&void 0!==t[e+1];)e+=1;var n=t[e][0],r=void 0===t[e-1]?n:t[e-1][0],o=t[e][1],l=void 0===t[e-1]?o:t[e-1][1];return Math.min(Math.max((a-r)/(n-r),0),1)*(o-l)+l}return lax.presets={linger:function(t){return{"data-lax-translate-y":"(vh*0.7) 0, 0 200, -500 0"}},lazy:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100;return{"data-lax-translate-y":"(vh) 0, (-elh) ".concat(t)}},eager:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100;return{"data-lax-translate-y":"(vh) 0, (-elh) -".concat(t)}},slalom:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50;return{"data-lax-translate-x":"vh ".concat(t,", (vh*0.8) ").concat(-t,", (vh*0.6) ").concat(t,", (vh*0.4) ").concat(-t,", (vh*0.2) ").concat(t,", (vh*0) ").concat(-t,", (-elh) ").concat(t)}},crazy:function(t){return{"data-lax-hue-rotate":_crazy}},spin:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:360;return{"data-lax-rotate":"(vh) 0, (-elh) ".concat(t)}},spinRev:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:360;return{"data-lax-rotate":"(vh) 0, (-elh) ".concat(-t)}},spinIn:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:360;return{"data-lax-rotate":"vh ".concat(t,", (vh*0.5) 0")}},spinOut:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:360;return{"data-lax-rotate":"(vh*0.5) 0, -elh ".concat(t)}},blurInOut:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:40;return{"data-lax-blur":"(vh) ".concat(t,", (vh*0.8) 0, (vh*0.2) 0, 0 ").concat(t)}},blurIn:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:40;return{"data-lax-blur":"(vh) ".concat(t,", (vh*0.7) 0")}},blurOut:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:40;return{"data-lax-blur":"(vh*0.3) 0, 0 ".concat(t)}},fadeInOut:function(){return{"data-lax-opacity":"(vh) 0, (vh*0.8) 1, (vh*0.2) 1, 0 0"}},fadeIn:function(){return{"data-lax-opacity":"(vh) 0, (vh*0.7) 1"}},fadeOut:function(){return{"data-lax-opacity":"(vh*0.3) 1, 0 0"}},driftLeft:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100;return{"data-lax-translate-x":"vh ".concat(t,", -elh ").concat(-t)}},driftRight:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100;return{"data-lax-translate-x":"vh ".concat(-t,", -elh ").concat(t)}},leftToRight:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return{"data-lax-translate-x":"vh 0, -elh (vw*".concat(t,")")}},rightToLeft:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return{"data-lax-translate-x":"vh 0, -elh (vw*".concat(-t,")")}},zoomInOut:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.2;return{"data-lax-scale":"(vh) ".concat(t,", (vh*0.8) 1, (vh*0.2) 1, -elh ").concat(t)}},zoomIn:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.2;return{"data-lax-scale":"(vh) ".concat(t,", (vh*0.7) 1")}},zoomOut:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.2;return{"data-lax-scale":"(vh*0.3) 1, -elh ".concat(t)}},speedy:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:30;return{"data-lax-skew-x":"(vh) ".concat(t,", -elh ").concat(-t)}},swing:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:30;return{"data-lax-skew-y":"(vh) ".concat(t,", -elh ").concat(-t)}}},lax.addPreset=function(t,a){lax.presets[t]=a},lax.setup=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};lax.breakpoints=t.breakpoints||{},lax.selector=t.selector||".lax",lax.populateElements()},lax.removeElement=function(a){var t=this.elements.findIndex(function(t){return t.el=a});-1<t&&this.elements.splice(t,1)},lax.addElement=function(el){for(var o={el:el,originalStyle:{transform:el.style.transform,filter:el.style.filter},transforms:{}},presets=[],i=0;i<el.attributes.length;i++){var a=el.attributes[i];-1<a.name.indexOf("data-lax-preset")&&presets.push(a)}for(var _loop=function(){a=presets[i];var o=(b=a.name.split(breakpointsSeparator))[1]?"".concat(breakpointsSeparator).concat(b[1]):"";a.value.split(" ").forEach(function(t){var a=t.split("-"),e=lax.presets[a[0]];if(e){var n=e(a[1]);for(var r in n)el.setAttribute("".concat(r).concat(o),n[r])}else console.log("lax error: preset ".concat(a[0]," is not defined"))}),el.setAttribute("data-lax-anchor","self"),el.attributes.removeNamedItem(a.name)},i=0;i<presets.length;i++){var a,b;_loop()}var useGpu=!(el.attributes["data-lax-use-gpu"]&&"false"===el.attributes["data-lax-use-gpu"].value);if(useGpu&&(el.style["-webkit-backface-visibility"]="hidden"),el.attributes["data-lax-use-gpu"]&&el.attributes.removeNamedItem("data-lax-use-gpu"),o.optimise=!1,el.attributes["data-lax-optimize"]&&"true"===el.attributes["data-lax-optimize"].value){o.optimise=!0;var bounds=el.getBoundingClientRect();el.setAttribute("data-lax-opacity","".concat(-bounds.height-1," 0, ").concat(-bounds.height," 1, ").concat(window.innerHeight," 1, ").concat(window.innerHeight+1," 0")),el.attributes.removeNamedItem("data-lax-optimize")}for(var i=0;i<el.attributes.length;i++){var a=el.attributes[i];if(!(a.name.indexOf("data-lax")<0)){var b=a.name.split(breakpointsSeparator),bits=b[0].split("-"),breakpoint=b[1]||"default";if("lax"===bits[1])if("data-lax-anchor"===a.name){o["data-lax-anchor"]="self"===a.value?el:document.querySelector(a.value);var rect=o["data-lax-anchor"].getBoundingClientRect();o.anchorTop=Math.floor(rect.top)+window.scrollY}else{var name,valueMap;!function(){var _a$value$split=a.value.split("|"),_a$value$split2=_slicedToArray(_a$value$split,2),arrString=_a$value$split2[0],optionString=_a$value$split2[1],options={};optionString&&optionString.split(" ").forEach(function(t){var a=_slicedToArray(t.split("="),2),e=a[0],n=a[1];options[e]=parseInt(n)}),name=b[0],valueMap=arrString.replace(new RegExp("vw","g"),window.innerWidth).replace(new RegExp("vh","g"),window.innerHeight).replace(new RegExp("elh","g"),el.clientHeight).replace(new RegExp("elw","g"),el.clientWidth).replace(new RegExp("-vw","g"),-window.innerWidth).replace(new RegExp("-vh","g"),-window.innerHeight).replace(new RegExp("-elh","g"),-el.clientHeight).replace(new RegExp("-elw","g"),-el.clientWidth).replace(/\s+/g," ").split(",").map(function(x){return x.trim().split(" ").map(function(y){return"("===y[0]?eval(y):parseFloat(y)})}).sort(function(t,a){return t[0]-a[0]}),o.transforms[name]||(o.transforms[name]={}),o.transforms[name][breakpoint]={valueMap:valueMap,options:options}}()}}}var spriteData=el.attributes["data-lax-sprite-data"]&&el.attributes["data-lax-sprite-data"].value;if(spriteData){o.spriteData=spriteData.split(",").map(function(t){return parseInt(t)}),el.style.height=o.spriteData[0]+"px",el.style.width=o.spriteData[1]+"px";var spriteImage=el.attributes["data-lax-sprite-image"]&&el.attributes["data-lax-sprite-image"].value;spriteImage&&(el.style.backgroundImage="url(".concat(spriteImage,")"))}lax.elements.push(o),lax.updateElement(o)},lax.populateElements=function(){lax.elements=[],document.querySelectorAll(lax.selector).forEach(this.addElement),currentBreakpoint=lax.getCurrentBreakPoint()},lax.getCurrentBreakPoint=function(){var t="default",a=window.innerWidth;for(var e in lax.breakpoints){if(!(parseFloat(lax.breakpoints[e])<=a))break;t=e}return t},lax.updateElement=function(t){var a=t.originalStyle,e=t.anchorTop,n=t.transforms,r=t.spriteData,o=t.el,l=e?e-lastY:lastY,i={transform:a.transform,filter:a.filter};for(var c in n){var s=n[c][currentBreakpoint]||n[c].default;if(s){for(var u in s.options)"loop"===u&&(l%=s.options.loop);var d=transformFns[c],p=intrp(s.valueMap,l);d&&d(i,p)}}if(r){var f=_slicedToArray(r,5),v=f[0],h=f[1],x=f[2],g=f[3],m=f[4],b=Math.floor(lastY/m)%x,y=b%g,w=Math.floor(b/g);i.backgroundPosition="".concat(y*v,"px -").concat(w*h,"px")}if(0===i.opacity)o.style.opacity=0;else for(var k in i)o.style[k]=i[k]},lax.update=function(t){lastY!==t&&(lastY=t,lax.elements.forEach(lax.updateElement))},lax}();"undefined"!=typeof module&&void 0!==module.exports?module.exports=lax:window.lax=lax}();